{% comment %}
** Cart page - main content area **
- Template section
{% endcomment %}

{% assign id = section.id %}
{% comment %}Layout{% endcomment %}
{% assign width = section.settings.width %}
{% assign padding_top = section.settings.padding_top %}
{% assign padding_bottom = section.settings.padding_bottom %}
{% comment %} Advanced {% endcomment %}
{% assign css_class = section.settings.css_class %}
{% assign custom_css = section.settings.custom_css %}

{% comment %} CSS {% endcomment %}
{% style %}

/* for dpo templates images(sumit)  */
  .custom-swatches-img{
  width:120px;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:10px;
    overflow:hidden;
}
.custom-swatches-img p{
  padding-top:10px; margin:0;
  font-size:16px;
  color:#000000;
  text-align:center;
}
.custom-swatches-img img{
  width: 120px;
  object-fit: cover;
}
@media screen and (max-width:600px){
  .custom-swatches-img{
  width:80px;
  padding:5px;
}
 .custom-swatches-img img{
  width: 80px;
} 

}
 
  /* for dpo templates images(sumit)  */

  
    .checkout{
    background:#000000!important;min-height: 55px!important; border-radius:5px!important;
  }
  .cart__checkout {
        width: 100%!important;
        margin-left: 0!important;
    }

   @media only screen and (max-width: 450px) {
         .cart__info {
         padding-left:50px !important;
         }
   }

  @media only screen and (max-width: 798px) {
    .cart__checkout .checkout {
        margin-bottom: 0px!important;
    }
}
  .section__wrapper {
    padding-top: {{ padding_top }}px;
    padding-bottom: {{ padding_bottom }}px;
    {% if width == 'wide' -%}
      width: 100%;
      max-width: 95%;
    {%- endif %}
  }

  {%
    render 'css-loop',
    css: custom_css,
    id: id
  %}


    /* Main container styling by sumit*/
  .custom-discount-codes-section {
        background-color: #f4f4f4;
        width: 100%;
        padding-top:20px;
        margin-bottom: -20px;
        text-align: center;
        display:flex;
        justify-content:space-between;
    }
  
    .custom-coupon-section{
        width: 50%;
    }
    
    /* Coupon code icon before each discount code */
    .custom-coupon-code-icon {
        display: inline-block;
        vertical-align: middle;
    }

    /* Discount code list styling */
    .custom-discount-codes-section ul {
        width: 100%;
        list-style: none;
        padding: 0;
      }

    .custom-discount-codes-section li {
        font-size: 16px;
        margin: 5px 10px;
        position: relative;
        border-radius: 5px;
        text-align: left;
        
        display: flex;
        align-items: center;
        padding:3px;
        justify-content: space-between;
    }
 
    .custom-discount-codes-section li .cupon-code-block {
        width:150px;
        background: #ccc;
        padding: 2px;
        border-radius: 5px;
        text-align: center;cursor:pointer;
    }
    .custom-discount-code-bg {
        display: inline-block;
        color: black;
        font-weight: bold;
        font-size: 15px;
        padding: 3px;
    }

    /* Strong tag inside discount code */
    .custom-discount-codes-section strong {
        color: black;
    }
    .cart__cost-summary{
    padding-top:0px !important;
  }
   @media screen and (max-width:780px){
      .custom-discount-codes-section{
        flex-direction: column;
        background:white;
      }
      .custom-coupon-section{
        width: 100%;
    }
     .custom-discount-codes-section li {
       margin:5px;        font-size: 12px;  display:flex;
        align-items: center;
     }
    .custom-discount-codes-section li .cupon-code-block {
      width:120px;
    }
    .custom-discount-code-bg {
        font-size: 13px;
    }
 .cupon-code-block svg{
   height:15px!important;
  width:15px!important;

 }
    }
  @media only screen and (max-width: 798px) {
    .cart__info {
        width: 60%!important;
        padding-left: 50px!important;
    }
    img{
      max-width:85%!important;
    }
}
  /* Main container styling by sumit*/




  
{% endstyle %}

<section class="section__wrapper section {{ css_class }}">

  <div class="container hide-when-banner-enabled cart__heading-container">
    {% capture heading_title %}{{ 'cart.general.title' | t }}{% endcapture %}
    {%
      render 'heading',
      title: heading_title,
      heading_tag: 'h1',
      context: 'cart-page',
      text_alignment: 'left'
    %}
  </div>
  

  <div class="container cart__empty-cart-message {% if cart.item_count > 0 %}is-hidden{% endif %}">
    <div class="column one-whole text-align-center has-padding-top has-padding-bottom">
      <h2 class="quote">{{ 'cart.general.continue_browsing_html' | t }}</h2>
      <a href="{% if cart.items.first.product.collections != blank %}{{ cart.items.first.product.collections.last.url }}{% else %}{{ routes.all_products_collection_url }}{% endif %}" class="action_button continue-button add_to_cart">{{ 'cart.general.continue_shopping_link_html' | t }}</a>
    </div>
  </div>

  <div class="cart__form {% if cart.item_count == 0 %}is-hidden{% endif %}"
      data-current-discount="{{ cart.total_discount }}">
    <form action="{{ routes.cart_url }}" method="post" id="cart_form" class="{% if cart.item_count == 0 %}visuallyhidden{% endif %} quantity-box-enabled-{{ section.settings.display_product_quantity_cart }}">

       <input type="hidden" id="customer-email" name="customer_email" value="{{ customer.email }}">
        <input type="hidden" id="customer-name" name="customer_name" value="{{ customer.name }}">
        <input type="hidden" id="customer-address" name="customer_address1" value="{{ customer.default_address.address1 }}">
        <input type="hidden" id="customer-city" name="customer_city" value="{{ customer.city }}">
        <input type="hidden" id="customer-country" name="customer_country" value="{{ customer.country }}">
        <input type="hidden" id="customer-phone" name="customer_phone" value="{{ customer.phone }}">
      
      <div class="container medium-down--hide">
        <div class="cart__headings column">
          <div class="cart__product-title">
            <h3>{{'cart.general.products' | t }}</h3>
          </div>

          <div class="cart__price-title {% if section.settings.display_product_quantity_cart == false %}no-quantity-box{% endif %}">
            <h3>{{'cart.general.price' | t }}</h3>
          </div>

          {% if section.settings.display_product_quantity_cart %}
            <div class="cart__quantity-title">
              <h3>{{'cart.general.quantity' | t }}</h3>
            </div>
          {% endif %}

          <div class="cart__total-title {% if section.settings.display_product_quantity_cart == false %}no-quantity-box{% endif %}">
            <h3>{{'cart.general.total' | t }}</h3>
          </div>

        </div>
      </div>

      <div class="container">
        <div class="cart__item-list one-whole column medium-down--one-whole">
          {% assign total_saving = 0 %}
          {% for item in cart.items %}
            {% if item.variant.compare_at_price > item.variant.price %}
              {% assign saving = item.variant.compare_at_price | minus: item.variant.price | times: item.quantity %}
              {% assign total_saving = saving | plus: total_saving %}
            {% endif %}

            <div class="cart__card container is-align-center" data-cart-item="{{ item.key }}" data-variant-id="{{ item.id }}" data-producthandle="{{ item.product.handle }}" data-productId="{{ item.product.id }}" data-line-item="{{ forloop.index }}">
              <div class="cart__image">
                <a href="{{ item.url }}" title="{{ item.title | escape }}" class="cart_page_image">
                  {%
                    render 'image-element',
                    image: item.image,
                    alt: item.title,
                    object_fit: true,
                    max_height: 150
                  %}
                </a>
              </div>
              <div class="cart__info">
                <div class="cart__description">
                  <div class="cart__text">
                    <p class="item__title">
                      <a href="{{ item.url }}">{{ item.product.title }}
                         <!-- **BEGIN** Hextom USB Integration // Cart Include - DO NOT MODIFY -->
                          {% render 'hextom_usb_cart', item: item %}
                          <!-- **END** Hextom USB Integration // Cart Include - DO NOT MODIFY -->
                      </a>    
                    </p>



                    
                  {% comment %} Amin's code {% endcomment %}
               {% comment %} {% if item.product.template_suffix == "custom-template" or item.product.template_suffix == "fabric-custom-template" %}
                      <button class="configuratorr-btn">Configure</button>
                    {% endif %}{% endcomment %}
                   {% comment %} end Amin's code {% endcomment %}
                    

                    {% unless item.variant.title contains "Title" %}
                      <p class="item__properties">
                        {% for option in item.product.options %}
                          <span>{{ option }}:</span> <span>{{ item.variant.options[forloop.index0] }}</span><br />
                        {% endfor %}
                      </p>
                    {% endunless %}

                    {% if item.properties %}
                      <p>
                        {% for p in item.properties %}
                          {% unless p.last == blank %}
                            {% if p.last contains '/uploads/' %}
                              <div>
                                {{ p.first }}: <a class="lightbox" href="{{ p.last }}">{{ 'cart.general.uploaded_file' | t }}</a>
                              </div>
                            {% else %}
                              <div>
                                {{ p.first }}: {{ p.last }}
                              </div>
                            {% endif %}
                          {% endunless %}
                        {% endfor %}
                      </p>
                    {% endif %}

                    {% if item.selling_plan_allocation.selling_plan %}
                      <p class="item__selling-plan-name">{{ item.selling_plan_allocation.selling_plan.name }}</p>
                    {% endif %}
                  </div>
                </div>

                <div class="cart__price">
                  {% if item.line_level_discount_allocations.size < 1 %}
                    <p>
                      {% if item.original_price > 0 %}
                        <span class="money {% if item.original_price < item.variant.compare_at_price %}sale{% endif %}">
                          {%
                            render 'price-element',
                            price: item.original_price
                          %}
                        </span>
                        {% if item.original_price < item.variant.compare_at_price %}
                          <span class="money compare-at-price">
                            {%
                              render 'price-element',
                              price: item.variant.compare_at_price
                            %}
                          </span>
                        {% endif %}
                      {% else %}
                        {{ settings.free_price_text }}
                      {% endif %}
                    </p>
                  {% endif %}

                  {% comment %} Discounts for line items {% endcomment %}
                  {% if item.line_level_discount_allocations.size > 0 %}
                    <p class="sale">
                      <span class="money">
                        {%
                          render 'price-element',
                          price: item.final_price
                        %}
                      </span>
                    </p>
                    {% if item.original_line_price > item.final_line_price %}
                      <s class="original-price">
                        <span class="money">
                          {%
                            render 'price-element',
                            price: item.original_price
                          %}
                        </span>
                      </s>
                    {% endif %}
                    {% for discount_allocation in item.line_level_discount_allocations %}
                      <div class="line-item-discount__container">
                        <p>{{ discount_allocation.discount_application.title }}</p>
                      </div>
                    {% endfor %}
                  {% endif %}

                  {%
                    render 'unit-price',
                    item: item,
                    class: 'cart__unit-price'
                  %}
                </div>

                {% if section.settings.display_product_quantity_cart %}
                  <div class="cart__quantity">
                    <div class="purchase-details__quantity product-quantity-box" data-line-item-key={{ forloop.index }}>
                      {%
                        render 'quantity-box',
                        item: item,
                        size: 'is-medium',
                        variant: item.variant
                      %}
                    </div>
                    <p class="cart__quantity-warning quantity-warning">
                  </div>
                {% endif %}

                <div class="cart__total">
                  <p>
                    {% if item.final_line_price > 0 %}
                      <span class="money">
                        {%
                          render 'price-element',
                          price: item.final_line_price
                        %}
                      </span>
                    {% else %}
                      {{ settings.free_price_text }}
                    {% endif %}
                  </p>
                </div>
              </div>
              <div class="cart__remove">
                <a class="cart__remove-btn is-inline-flex is-align-center is-justify-center ajax-cart__delete" data-cart-page-delete data-cart-item-key="{{ item.key }}" data-line-item-key={{ forloop.index }} href="{{ routes.cart_change_url }}?line={{ forloop.index }}&amp;quantity=0" title="{{ 'cart.general.remove' | t }}" >
                  <button class="close" aria-label="close">
                    {%
                      render 'icon',
                      name: 'x'
                    %}
                  </button>
                </a>
              </div>
            </div>
          {% endfor %}



{% comment %}
{% comment %} Free gift section {% endcomment %}
 <style>
.free-gift-box {
  background: #f4f9ff;
  border: 1px solid #d7e4ff;
  border-radius: 12px;
  padding: 16px;
  margin: 20px 0;
  position: relative;
  overflow: hidden;
  transition: all .3s ease;
}
@media (max-width:800px){
.free-gift-box {
padding: 40px 10px;
}
}
.gift-fade {
  opacity: 0;
  animation: fadeIn .6s forwards;
}

@keyframes fadeIn {
  from {opacity: 0; transform: translateY(5px);}
  to {opacity: 1; transform: translateY(0);}
}

/* Updated for gift GIF */
.gift-pillow-img {
  width: 55px;
  height: auto;
  border-radius: 6px;
}

.gift-inner {
  display: flex;
  align-items: center;
  gap: 12px;
}

/* Progress Bar */
.gift-progressbar {
  width: 100%;
  height: 8px;
  background: #dfe8ff;
  border-radius: 5px;
  margin-top: 10px;
  overflow: hidden;
}

.gift-progressbar-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #4e7bff, #84a6ff);
  transition: width .4s ease;
}

/* Timer */
.gift-timer {
  text-align: center;
  margin-top: 12px;
  font-size: 14px;
  font-weight: 600;
  color: #ff3b3b;
}

/* Ribbon */
.gift-ribbon {
  position: absolute;
  top: 10px;
  right: 10px;
  background: #0aa03e;
  color: white;
  padding: 4px 40px;
  {% comment %} transform: rotate(45deg); {% endcomment %}
  font-size: 12px;
  font-weight: bold;
  opacity: 0;
  transition: opacity .4s ease;
  border-radius:5px;
}

  </style>

<div id="free-gift-offer" class="free-gift-box">
  <div class="gift-inner">
    <img 
      src="https://cdn.shopify.com/s/files/1/0614/7453/7714/files/wrapped-gift_1f381.gif?v=1764579161"
      alt="Free Designer Pillow Gift"
      class="gift-pillow-img"
    />

    <div class="gift-text"></div>
  </div>

  <div class="gift-progressbar">
    <div class="gift-progressbar-fill"></div>
  </div>

  <div id="gift-timer" class="gift-timer"></div>

  <div class="gift-ribbon" id="gift-ribbon">UNLOCKED</div>
</div>



<script>
function runCountdown() {
  const timerBox = document.getElementById("gift-timer");
  if (!timerBox) return;

  let endTime = localStorage.getItem("giftCountdownEnd");

  // If no end time exists OR time is already passed â†’ set for tomorrow 11:59 AM
  if (!endTime || Date.now() > endTime) {
    const now = new Date();
    const tomorrow = new Date(
      now.getFullYear(),
      now.getMonth(),
      now.getDate() + 1, // tomorrow
      11, 59, 0, 0       // 11:59 AM
    );
    endTime = tomorrow.getTime();
    localStorage.setItem("giftCountdownEnd", endTime);
  }

  const distance = endTime - Date.now();

  if (distance <= 0) {
    timerBox.innerHTML = "Offer ends soon!";
    return;
  }

  const hours = Math.floor(distance / (1000 * 60 * 60));
  const minutes = Math.floor((distance / (1000 * 60)) % 60);
  const seconds = Math.floor((distance / 1000) % 60);

  timerBox.innerHTML = `â³ <b>${hours}h ${minutes}m ${seconds}s</b> left to claim your FREE Designer Pillow Cover`;
}

/* --------------------------
   UPDATE GIFT MESSAGE 
   â€” WITHOUT BLINKING
--------------------------- */
let lastGiftMessage = "";  // ðŸŸ¢ this prevents blinking

function updateGiftMessage(cart) {
  const threshold = 500;

  let cartTotal = (cart.total_price && cart.total_price > 0)
      ? cart.total_price / 100
      : cart.items_subtotal_price / 100;

  const box = document.getElementById("free-gift-offer");
  if (!box) return;

  const textBox = box.querySelector(".gift-text");
  const ribbon = box.querySelector("#gift-ribbon");
  const progressFill = box.querySelector(".gift-progressbar-fill");

  const percentage = Math.min((cartTotal / threshold) * 100, 100);
  progressFill.style.width = percentage + "%";

  let newMessage = "";

  if (cartTotal >= threshold) {
    newMessage = `
      <p class="gift-unlocked">
        ðŸŽ‰ Youâ€™ve unlocked your Free Pair Of Designer Throw Pillow Cover!
      </p>
    `;
    ribbon.style.opacity = "1";
  } else {
    const remaining = Math.max(threshold - cartTotal, 0).toFixed(2);
    newMessage = `
      <p class="gift-progress">
        Add <strong>$${remaining}</strong> more to get Free Pair Of Designer Throw Pillow Cover!
      </p>
    `;
    ribbon.style.opacity = "0";
  }

  // â­ Update only when message changes (fixes blinking)
  if (newMessage !== lastGiftMessage) {
    textBox.innerHTML = newMessage;

    // Add fade animation ONLY when changed
    textBox.classList.remove("gift-fade");
    void textBox.offsetWidth; // force reflow (restart animation)
    textBox.classList.add("gift-fade");

    lastGiftMessage = newMessage;
  }
}

function refreshGiftFromCart() {
  fetch('/cart.js')
    .then(res => res.json())
    .then(cart => updateGiftMessage(cart));
}

setInterval(refreshGiftFromCart, 100);
setInterval(runCountdown, 1000);
</script>
{% endcomment %}

<!-- Discount Codes Section sumit -->

    <div class="custom-discount-codes-section">
        <div class="custom-coupon-section"></div>
        <div class="custom-coupon-section">
            <div id="copy-message" style="display: none; color: green; margin-bottom: 10px;"></div>
            <ul>
                  {% comment %} <li>
                    <span class="C-offer-text-block" style="width:50%!important">15% Off Sitewide &nbsp;</span>
                    <span class="cupon-code-block">
                        <span class="custom-coupon-code-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="20" height="20"
                                fill="#333">
                                <path
                                    d="M17.78 3.09C17.45 2.443 16.778 2 16 2h-5.165c-.535 0-1.046.214-1.422.593l-6.82 6.89c0 .002 0 .003-.002.003-.245.253-.413.554-.5.874L.738 8.055c-.56-.953-.24-2.178.712-2.737L9.823.425C10.284.155 10.834.08 11.35.22l4.99 1.337c.755.203 1.293.814 1.44 1.533z"
                                    fill-opacity=".55"></path>
                                <path
                                    d="M10.835 2H16c1.105 0 2 .895 2 2v5.172c0 .53-.21 1.04-.586 1.414l-6.818 6.818c-.777.778-2.036.782-2.82.01l-5.166-5.1c-.786-.775-.794-2.04-.02-2.828.002 0 .003 0 .003-.002l6.82-6.89C9.79 2.214 10.3 2 10.835 2zM13.5 8c.828 0 1.5-.672 1.5-1.5S14.328 5 13.5 5 12 5.672 12 6.5 12.672 8 13.5 8z">
                                </path>
                            </svg>
                        </span>
                        <span class="custom-discount-code-bg coupon-code"
                            data-code="FROSTY15"><strong>FROSTY15</strong></span></span>
                </li>  {% endcomment %}
             <li>
                    <span class="C-offer-text-block" style="width:50%!important">20% Off Outdoor Furniture Covers &nbsp; </span>
                    <span class="cupon-code-block">
                    <span class="custom-coupon-code-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="20" height="20" fill="#333">
                            <path
                                d="M17.78 3.09C17.45 2.443 16.778 2 16 2h-5.165c-.535 0-1.046.214-1.422.593l-6.82 6.89c0 .002 0 .003-.002.003-.245.253-.413.554-.5.874L.738 8.055c-.56-.953-.24-2.178.712-2.737L9.823.425C10.284.155 10.834.08 11.35.22l4.99 1.337c.755.203 1.293.814 1.44 1.533z"
                                fill-opacity=".55"></path>
                            <path
                                d="M10.835 2H16c1.105 0 2 .895 2 2v5.172c0 .53-.21 1.04-.586 1.414l-6.818 6.818c-.777.778-2.036.782-2.82.01l-5.166-5.1c-.786-.775-.794-2.04-.02-2.828.002 0 .003 0 .003-.002l6.82-6.89C9.79 2.214 10.3 2 10.835 2zM13.5 8c.828 0 1.5-.672 1.5-1.5S14.328 5 13.5 5 12 5.672 12 6.5 12.672 8 13.5 8z">
                            </path>
                        </svg>
                    </span>
                    <span class="custom-discount-code-bg coupon-code"
                        data-code="FROSTY20"><strong>FROSTY20</strong></span></span>
                </li> 
   <li>
                    <!-- <span class="C-offer-text-block" style="width:50%!important">Free Rush Shipping on Orders Over $500 (no code needed) &nbsp; </span> -->
                  
                </li> 
               
              
            </ul>
        </div>
    </div>


<script>
    $(document).ready(function () {
        $(".coupon-code").on("click", function () {
            var code = $(this).data("code");

            // Create a temporary input element to copy the code
            var $tempInput = $("<input>");
            $("body").append($tempInput);
            $tempInput.val(code).select();
            document.execCommand("copy");
            $tempInput.remove();

            // Show the copy message with the copied code
            $("#copy-message").text("Copied: " + code).fadeIn().delay(2000).fadeOut();
        });
    });
   

</script>
<!-- Discount Codes Section sumit -->




          



          <div class="cart__cost-summary container is-flex-column">
            <div class="column eight offset-by-eight medium-down--one-whole">
              {% comment %} {%- if cart.cart_level_discount_applications != blank -%}
                <div class="cart__discounts cart__row">
                  {%- for discount_application in cart.cart_level_discount_applications -%}
                    <div class="cart__row-description">
                      <p class="cart__discount-title">{{- discount_application.title -}}</p>
                    </div>

                    
                    <p class="cart__discount">
                      <span class="money">
                        -
                        {%
                          render 'price-element',
                          price: discount_application.total_allocated_amount
                        %}
                      </span>
                    </p>
                  {%- endfor -%}
                </div>
              {%- endif -%} {% endcomment %}
              {% comment %} <div class="cart__subtotal-container cart__row">
                <div class="cart__row-description">
                  <p class="h3">{{ 'cart.general.subtotal' | t }}:</p>
                </div>
                <p class="h3 cart__subtotal">
                  <span class="money cart_total">
                    {%
                      render 'price-element',
                      price: cart.total_price
                    %}
                  </span>
                </p>
              </div>
              {% if section.settings.display_savings and total_saving > 0 %}
                <div class="cart__total-savings cart__row">
                  <div class="cart__row-description">
                    <p class="cart">{{ 'layout.general.savings' | t }}:</p>
                  </div>
                  <p class="cart__total-discount">
                    <span class="money">
                      {% assign total_savings = total_saving | plus: cart.total_discount %}
                      {%
                        render 'price-element',
                        price: total_savings
                      %}
                    </span>
                  </p>
                </div>
              {% endif %}
            </div>
          </div> {% endcomment %}

          <div class="container has-no-side-gutter has-padding-top">
            <div class="two-thirds column medium-down--one-whole has-padding-bottom">
    
    
             
              {% comment %} Amin's code {% endcomment %}
             {% comment %}  {% if customer %}
                <button id="draftOrder">Draft Order</button> 
              {% endif %}{% endcomment %}
               {% comment %} end Amin's code {% endcomment %}
               
              
              {% if settings.display_special_instructions %}
                <span class="cart__notes">
                    <div class="field">
                      <label
                        for="note"
                        {% if settings.use_placeholders %}class="is-sr-only"{% endif %}
                      >
                        {{ 'cart.general.note' | t: shop_name: shop.name }}:
                      </label>
                      <div class="control">
                        <textarea
                          class="textarea"
                          id="note"
                          name="note"
                          rows="3"
                          {% if settings.use_placeholders %}placeholder="{{ 'cart.general.note_detailed' | t: shop_name: shop.name }}"{% endif %}
                        >
                          {{ cart.note }}
                        </textarea>
                      </div>
                    </div>
                </span>
              {% endif %}
            </div>
            <div class="one-third column medium-down--one-whole">
              <div class="cart__price-breakdown {% if settings.display_tos_checkbox %}js-tos-enabled{% endif %}">
                  {% if section.settings.cart_message != blank %}
                    <div class="cart__cart-message is-flex is-justify-end">
                      {{ section.settings.cart_message }}
                    </div>
                  {% endif %}

                  <div class="cart__checkout-container">
                    <div class="is-flex is-align-center cart__checkout-elements">
                      {% if settings.display_tos_checkbox %}
                        <div class="cart__tos">
                          <div class="field">
                            <label class="tos_label" for="cart_agree">
                              <input type="checkbox" class="tos_agree" id="cart_agree" required />
                              {{ 'cart.general.agree_to_terms_html' | t }}
                            </label>
                            {% if settings.tos_page != blank %}
                              <div class="cart__view-terms-container">
                                <a href="{{ pages[settings.tos_page].url }}" class="text-align-right" target="_blank"  rel="noopener">{{ 'cart.general.view_terms' | t }}</a>
                              </div>
                            {% endif %}
                          </div>
                        </div>
                      {% endif %}
                    </div>
                    <div class="is-flex is-align-center is-justify-end cart__buttons">
                      <div class="cart__checkout">
                        <button type="submit" class="button add_to_cart checkout" id="checkout" name="checkout" value="{{ 'cart.general.checkout' | t }}">
                          {% if settings.show_lock_icon %}
                            {%
                              render 'icon',
                              name: 'lock'
                            %}
                          {% endif %}
                          {{ 'cart.general.checkout' | t }}
                        </button>
                      </div>
                    </div>
                    <div class="is-flex is-align-center is-justify-end">
                      {% if content_for_additional_checkout_buttons %}
                        <div class="additional-checkout-buttons">
                          {{ content_for_additional_checkout_buttons }}
                        </div>
                      {% endif %}
                    </div>
                    <div class="is-flex is-align-center is-justify-end">
                      {% if cart.item_count > 0 %}
                        <div class="cart__featured-links">
                          <a href="https://zipcushions.myshopify.com/pages/customize">{{ 'cart.general.continue_shopping_link_html' | t }}</a>
                        </div>
                      {% endif %}
                    </div>
                  </div>

              </div>
            </div>
          </div>

        </div>
      </div>
    </form>
  </div>

  {% if settings.enable_shipping_calculator == true %}
    <div class="container">
      <div class="one-whole column">
        {% render 'shipping-calculator' %}
      </div>
    </div>
  {% endif %}

</section>

<div class="container is-justify-center has-padding-top cart__blocks">
  {% for block in section.blocks %}
    {% if block.type == 'featured_collection' %}
      <div id="shopify-section-{{ block.id }}" {{ block.shopify_attributes }} class="shopify-section cart__block block__{{ block.type | downcase | replace: '_', '-' }} featured-collection-section jsFeaturedCollection">
        {% include 'include-featured-collection', type: 'block' %}
        {% comment %}JavaScript{% endcomment %}
          <script
              type="application/json"
              data-section-id="{{ block.id }}"
              data-section-data
          >
            {
              "collection_style": {{ layout | json }},
              "products_per": {{ block.settings.products_per_row | json}},
              "products_available": {{ collections[col].all_products_count | json }},
              "products_limit": {{ block.settings.products_limit | json }},
              "align_height": {{ block.settings.align_height | json }}
            }
          </script>
          <script src="{{ 'z__jsFeaturedCollection.js' | asset_url }}"></script>
      </div>
    {% elsif block.type == 'featured_product' %}
      <div id="shopify-section-{{ block.id }}" {{ block.shopify_attributes }} class="shopify-section cart__block block__{{ block.type | downcase | replace: '_', '-' }} featured-product-section jsProduct">
        {% include 'include-featured-product', type: 'block' %}
        <script
              type="application/json"
              data-section-id="{{ block.id }}"
              data-section-data
          >
            {
              "gallery_arrows": {{ block.settings.gallery_arrows | json }},
              "thumbnail_arrows": {{ block.settings.gallery_arrows | json }},
              "enable_zoom": {{ block.settings.enable_zoom | json }},
              "enable_product_lightbox": {{ block.settings.enable_product_lightbox | json }},
              "enable_thumbnail_slider": {{ block.settings.enable_thumbnail_slider | json }},
              "slideshow_speed": {{ block.settings.slideshow_speed | json }},
              "slideshow_transition": {{ section.settings.slideshow_transition | json }},
              "image_position": {{ block.settings.image_position | json }},
              "thumbnails_enabled": {{ block.settings.display_thumbnails | json }},
              "thumbnail_position": {{ block.settings.thumbnail_position | json }},
              "product_media_amount": {{ product.media.size }},
              "template": "featured-product-section"
            }
          </script>
      </div>
    {% elsif block.type == 'text' %}
      <div id="shopify-section-{{ block.id }}" {{ block.shopify_attributes }} class="shopify-section cart__block block__{{ block.type | downcase | replace: '_', '-' }}">
        {% include 'include-rich-text', type: 'block' %}
      </div>
    {% endif %}
  {% endfor %}
</div>

{% comment %}JavaScript{% endcomment %}
<script
  type="application/json"
  data-section-id="{{ section.id }}"
  data-section-data
>
  {
    "shipping": {
      "multiple_rates": {{ 'cart.shipping_calculator.multiple_rates' | t: number_of_rates: '*number_of_rates*', address: '*address*', rate: '*rate*' | json }},
      "one_rate": {{ 'cart.shipping_calculator.one_rate' | t: address: '*address*' | json }},
      "no_rates": {{ 'cart.shipping_calculator.no_rates' | t | json }},
      "rate_value": {{ 'cart.shipping_calculator.rate_value' | t: rate_title: '*rate_title*', rate: '*rate*'  | json }}
    }
  }
</script>
<script src="{{ 'z__jsCart.js' | asset_url }} defer"></script>
<script src="{{ 'z__jsShippingCalculator.js' | asset_url }}" defer></script>


  {% render 'configure-popup-cart' %}

{% comment %} Amin's code {% endcomment %}

{% comment %}
<script>
$(document).ready(function(){
    $('body').on('click', '.block-btnn, .block-option', function () {
        $(this).parent().addClass('vn-active-btn').siblings().removeClass('vn-active-btn');
        // $(this).addClass('vn-active-btn');
    });
  
    $('#draftOrder').click(function() {
        $.getJSON('/cart.js', function(cart) {
            const cartItems = cart.items;
    
            // Collect customer data from hidden inputs
            const customerData = {
                email: $('#customer-email').val(),
                name: $('#customer-name').val(),
                address1: $('#customer-address').val(),
                city: $('#customer-city').val(),
                country: $('#customer-country').val(),
                phone: $('#customer-phone').val(),
                // Add more fields as needed!
            };
    
            // Send both cart and customer data
            $.ajax({
                url: 'https://app.zipcushions.com/zipcushion-app/draftOrder',
                method: 'POST',
                dataType: 'json',
                data: {
                    cartItems: JSON.stringify(cartItems),
                    customerData: JSON.stringify(customerData)
                },
                success: function(response) {
                    const draftOrderName = response.draft_order.draft_order.name;
                    console.log("Draft order name:", draftOrderName);
                    $('#draftOrder').after('<div class="success-msgg" style="color:green">'+draftOrderName+' order created successfully.</div>');
                },
                error: function(xhr, status, error) {
                    console.error("Error:", error);
                    alert("Failed to create draft order.");
                }
            });
        });
    });

});
</script>
{% render 'fabric-custom-js' %}
{% endcomment %} 
{% comment %} end Amin's code {% endcomment %}
 




{% schema %}

{
  "name": "Cart",
  "class": "cart-section jsCart jsShippingCalculator",
  "settings": [
    {
      "type": "checkbox",
      "id": "display_product_quantity_cart",
      "label": "Show quantity box",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "display_savings",
      "label": "Show total savings",
      "default": true
    },
    {
      "type": "richtext",
      "id": "cart_message",
      "label": "Cart message"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "width",
      "label": "Width",
      "default": "standard",
      "options": [
        {
          "value": "standard",
          "label": "Standard"
        },
        {
          "value": "wide",
          "label": "Wide"
        }
      ]
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Top spacing",
      "min": 0,
      "max": 80,
      "default": 40,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Bottom spacing",
      "min": 0,
      "max": 80,
      "default": 40,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "Advanced",
      "info": "[Learn more](https://help.outofthesandbox.com/hc/en-us/articles/360022329373)"
    },
    {
      "type": "text",
      "id": "css_class",
      "label": "CSS Class"
    },
    {
      "type": "textarea",
      "id": "custom_css",
      "label": "Custom CSS"
    }
  ],
  "blocks": [
    {
      "type": "featured_collection",
      "name": "Featured collection",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Featured collection"
        },
        {
          "type": "collection",
          "id": "collection",
          "label": "Collection"
        },
        {
        "type": "header",
        "content": "Product"
        },
        {
          "type": "range",
          "id": "products_per",
          "label": "Products per row",
          "min": 2,
          "max": 7,
          "default": 5
        },
        {
          "type": "select",
          "id": "mobile_products_per_row",
          "label": "Products per row on mobile",
          "options": [
            {
              "value": "1",
              "label": "1"
            },
            {
              "value": "2",
              "label": "2"
            }
          ],
          "default": "1"
        },
        {
          "type": "range",
          "id": "products_limit",
          "label": "Limit products",
          "min": 3,
          "max": 50,
          "default": 10
        },
        {
          "type": "checkbox",
          "id": "align_height",
          "label": "Align to height"
        },
        {
          "type": "range",
          "id": "collection_height",
          "label": "Product image height",
          "min": 150,
          "max": 400,
          "step": 10,
          "default": 200,
          "unit": "px",
          "info": "Applied when 'Align to height' is enabled. [Learn more](https://help.outofthesandbox.com/hc/en-us/articles/360022543913)"
        },
        {
          "type": "header",
          "content": "Layout"
        },
        {
          "type": "radio",
          "id": "collection_style",
          "label": "Collection layout",
          "default": "grid",
          "options": [
            {
              "value": "slider",
              "label": "Slider"
            },
            {
              "value": "grid",
              "label": "Grid"
            }
          ],
          "default": "grid"
        },
        // {
        //   "type": "checkbox",
        //   "id": "enable_masonry_layout",
        //   "label": "Enable masonry layout",
        //   "default": false,
        //   "info": "Applied on grid layout"
        // },
        {
          "type": "select",
          "id": "width",
          "label": "Width",
          "default": "wide",
          "options": [
            {
              "value": "standard",
              "label": "Standard"
            },
            {
              "value": "wide",
              "label": "Wide"
            }
          ]
        },
        {
          "type": "checkbox",
          "id": "show_gutter",
          "label": "Show gutter",
          "default": true
        },
        {
          "type": "range",
          "id": "padding_top",
          "label": "Top spacing",
          "min": 0,
          "max": 80,
          "default": 20,
          "unit": "px"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "label": "Bottom spacing",
          "min": 0,
          "max": 80,
          "default": 20,
          "unit": "px"
        },
        {
          "type": "select",
          "id": "animation",
          "label": "Animation",
          "default": "none",
          "options": [
            {
              "value": "none",
              "label": "None"
            },
            {
              "value": "fadeIn",
              "label": "Fade in"
            },
            {
              "value": "fadeInDown",
              "label": "Fade in down"
            },
            {
              "value": "fadeInLeft",
              "label": "Fade in left"
            },
            {
              "value": "fadeInRight",
              "label": "Fade in right"
            },
            {
              "value": "slideInLeft",
              "label": "Slide in left"
            },
            {
              "value": "slideInRight",
              "label": "Slide in right"
            }
          ]
        }
      ]
    },
    {
      "type": "featured_product",
      "name": "Featured product",
      "settings": [
        {
          "type": "product",
          "id": "featured_product",
          "label": "Product"
        },
        {
          "type": "header",
          "content": "Product gallery"
        },
        {
          "type": "checkbox",
          "id": "display_thumbnails",
          "label": "Show thumbnails",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "gallery_arrows",
          "label": "Show arrows",
          "info": "Only applies to desktop",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "enable_zoom",
          "label": "Magnify on hover",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "enable_product_lightbox",
          "label": "Enable lightbox",
          "default": true
        },
        {
          "type": "range",
          "id": "slideshow_speed",
          "label": "Gallery speed",
          "min": 0,
          "max": 6,
          "unit": "sec",
          "default": 0,
          "info": "Set to 0 to disable autoplay."
        },
        {
          "type": "select",
          "id": "slideshow_transition",
          "label": "Gallery transition",
          "options": [
            {
              "value": "slide",
              "label": "Slide"
            },
            {
              "value": "fade",
              "label": "Fade"
            }
          ],
          "default": "slide"
        },
        {
          "type": "select",
          "id": "thumbnail_position",
          "label": "Thumbnails",
          "default": "bottom-thumbnails",
          "options": [
            {
              "value": "left-thumbnails",
              "label": "Left"
            },
            {
              "value": "right-thumbnails",
              "label": "Right"
            },
            {
              "value": "bottom-thumbnails",
              "label": "Bottom"
            },
            {
              "value": "no-thumbnails",
              "label": "None"
            }
          ]
        },
        {
          "type": "checkbox",
          "id": "enable_thumbnail_slider",
          "label": "Enable thumbnail slider",
          "default": true
        },
        {
          "type": "header",
          "content": "Product information"
        },
        {
          "type": "checkbox",
          "id": "display_vendor",
          "label": "Show vendor",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "display_sku",
          "label": "Show SKU",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "enable_shopify_product_badges",
          "label": "Show star rating",
          "info": "Reviews app must be enabled. [Learn more](https://help.outofthesandbox.com/hc/en-us/articles/360008549274#section2)",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "display_savings",
          "label": "Show price savings",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_description",
          "label": "Show description",
          "default": true
        },
        {
          "type": "radio",
          "id": "product_description_position",
          "label": "Description position",
          "default": "top",
          "options": [
            {
              "value": "top",
              "label": "Above 'add to cart'"
            },
            {
              "value": "bottom",
              "label": "Below 'add to cart'"
            }
          ]
        },
        {
          "type": "checkbox",
          "id": "display_collections",
          "label": "Show collections",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "display_type",
          "label": "Show type",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "display_tags",
          "label": "Show tags",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "display_social_buttons",
          "label": "Show social media share icons",
          "default": true
        },
        {
          "type": "header",
          "content": "Dynamic Checkout Button"
        },
        {
          "type": "checkbox",
          "id": "show_payment_button",
          "label": "Show dynamic checkout button",
          "default": true,
          "info": "Each customer will see their preferred payment method from those available on your store, such as PayPal or Apple Pay. [Learn more](https:\/\/help.shopify.com\/manual\/using-themes\/change-the-layout\/dynamic-checkout)"
        },
        {
          "type": "header",
          "content": "Media",
          "info": "Learn more about [media types](https://help.shopify.com/en/manual/products/product-media)"
        },
        {
          "type": "radio",
          "id": "product_images_position",
          "label": "Media position",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ],
          "default": "left"
        },
        {
          "type": "checkbox",
          "id": "set_product_height",
          "label": "Set height of product media",
          "default": false
        },
        {
          "type": "range",
          "id": "product_height",
          "label": "Product media height",
          "min": 200,
          "max": 800,
          "step": 10,
          "default": 500,
          "unit": "px"
        },
        {
          "type": "checkbox",
          "id": "video_looping",
          "label": "Enable video looping",
          "default": false
        },
        {
          "type": "header",
          "content": "Layout"
        },
        {
          "type": "select",
          "id": "width",
          "label": "Width",
          "default": "standard",
          "options": [
            {
              "value": "standard",
              "label": "Standard"
            },
            {
              "value": "wide",
              "label": "Wide"
            }
          ]
        },
        {
          "type": "range",
          "id": "padding_top",
          "label": "Top spacing",
          "min": 0,
          "max": 80,
          "default": 20,
          "unit": "px"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "label": "Bottom spacing",
          "min": 0,
          "max": 80,
          "default": 20,
          "unit": "px"
        },
        {
          "type": "select",
          "id": "animation",
          "label": "Animation",
          "default": "none",
          "options": [
            {
              "value": "none",
              "label": "None"
            },
            {
              "value": "fadeIn",
              "label": "Fade in"
            },
            {
              "value": "fadeInDown",
              "label": "Fade in down"
            },
            {
              "value": "fadeInLeft",
              "label": "Fade in left"
            },
            {
              "value": "fadeInRight",
              "label": "Fade in right"
            },
            {
              "value": "slideInLeft",
              "label": "Slide in left"
            },
            {
              "value": "slideInRight",
              "label": "Slide in right"
            },
            {
              "value": "zoomIn",
              "label": "Zoom in"
            }
          ]
        }
      ]
    },
    {
      "type": "text",
      "name": "Rich text",
      "settings": [
        {
          "type": "header",
          "content": "Heading"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Catchy heading"
        },
        {
          "type": "font_picker",
          "id": "heading_font",
          "label": "Font",
          "default": "open_sans_n4"
        },
        {
          "type": "color",
          "id": "heading_color",
          "label": "Heading",
          "default": "rgba(0,0,0,0)"
        },
        {
          "type": "select",
          "id": "heading_alignment",
          "label": "Alignment",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "justify",
              "label": "Justify"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ],
          "default": "center"
        },
        {
          "type": "range",
          "id": "heading_size",
          "label": "Size",
          "min": 20,
          "max": 120,
          "default": 30,
          "unit": "px"
        },
        {
          "type": "header",
          "content": "Text"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Use this section to create some callout text on your page, or add more details about your shop, services, promotions, etc.<br>You can keep the background color solid or use a background image instead.</p>"
        },
        {
          "type": "font_picker",
          "id": "text_font",
          "label": "Font",
          "default": "open_sans_n4"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text",
          "default": "rgba(0,0,0,0)"
        },
        {
          "type": "select",
          "id": "text_alignment",
          "label": "Text alignment",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "justify",
              "label": "Justify"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ],
          "default": "center"
        },
        {
          "type": "range",
          "id": "text_size",
          "label": "Size",
          "min": 8,
          "max": 40,
          "default": 14,
          "unit": "px"
        },
        {
          "type": "range",
          "id": "columns",
          "label": "Columns",
          "min": 1,
          "max": 3,
          "default": 1
        },
        {
          "type": "header",
          "content": "Button"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button label",
          "default": "Read more"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button link"
        },
        {
          "type": "select",
          "id": "button_alignment",
          "label": "Alignment",
          "options": [
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ],
          "default": "center"
        },
        {
          "type": "select",
          "id": "button_style",
          "label": "Style",
          "options": [
            {
              "value": "button--primary",
              "label": "Primary"
            },
            {
              "value": "button--secondary",
              "label": "Secondary"
            },
            {
              "value": "button--link-style",
              "label": "Link style"
            }
          ],
          "default": "button--primary"
        },
        {
          "type": "header",
          "content": "Background"
        },
        {
          "type": "color",
          "id": "background",
          "label": "Background",
          "default": "#EEEEEE"
        },
        {
          "type": "color",
          "id": "gradient",
          "label": "Gradient",
          "default": "rgba(0,0,0,0)"
        },
        {
          "type": "range",
          "id": "gradient_rotation",
          "label": "Gradient rotation",
          "min": 0,
          "max": 180,
          "step": 10,
          "default": 0,
          "unit": "deg"
        },
        {
          "type": "header",
          "content": "Layout"
        },
        {
          "type": "select",
          "id": "width",
          "label": "Width",
          "default": "standard",
          "options": [
            {
              "value": "half",
              "label": "Half"
            },
            {
              "value": "standard",
              "label": "Standard"
            },
            {
              "value": "wide",
              "label": "Wide"
            }
          ]
        },
        {
          "type": "range",
          "id": "padding_top",
          "label": "Top spacing",
          "min": 0,
          "max": 80,
          "default": 0,
          "unit": "px"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "label": "Bottom spacing",
          "min": 0,
          "max": 80,
          "default": 0,
          "unit": "px"
        },
        {
          "type": "range",
          "id": "padding_left",
          "label": "Left spacing",
          "min": 0,
          "max": 80,
          "default": 0,
          "unit": "px"
        },
        {
          "type": "range",
          "id": "padding_right",
          "label": "Right spacing",
          "default": 0,
          "min": 0,
          "max": 80,
          "unit": "px"
        },
        {
          "type": "select",
          "id": "animation",
          "label": "Animation",
          "default": "none",
          "options": [
            {
              "value": "none",
              "label": "None"
            },
            {
              "value": "fadeIn",
              "label": "Fade in"
            },
            {
              "value": "fadeInDown",
              "label": "Fade in down"
            },
            {
              "value": "fadeInLeft",
              "label": "Fade in left"
            },
            {
              "value": "fadeInRight",
              "label": "Fade in right"
            },
            {
              "value": "slideInLeft",
              "label": "Slide in left"
            },
            {
              "value": "slideInRight",
              "label": "Slide in right"
            },
            {
              "value": "zoomIn",
              "label": "Zoom in"
            }
          ]
        }
      ]
    }
  ]
}

{% endschema %}
